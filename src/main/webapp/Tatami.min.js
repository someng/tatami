var TatamiApp=angular.module("TatamiApp",["TopMenuModule","LoginModule","HomeModule","AccountModule","AboutModule","AdminModule","ngResource","ngTouch","ngCookies","pascalprecht.translate","ui.router","ui.bootstrap","mentio","LocalStorageModule","bm.bsTour"]);TatamiApp.run(["$rootScope","$state",function(a,b){a.$on("$stateChangeSuccess",function(a,c,d,e,f){b.includes("tatami.home")&&c!==e&&(document.body.scrollTop=document.documentElement.scrollTop=0)})}]),TatamiApp.run(["$rootScope","$state","$stateParams","AuthenticationService","UserSession","localStorageService",function(a,b,c,d,e,f){a.$state=b,a.$stateParams=c,e.authenticate().then(function(c){null!==c?(null===c.action&&(angular.isDefined(b.current.data)&&!b.current.data["public"]&&(e.clearSession(),b.go("tatami.login.main")),angular.isDefined(a.destinationState)?b.go(a.destinationState,a.destinationParams):(e.clearSession(),b.go("tatami.login.main"))),angular.isDefined(c.username)&&(e.isAuthenticated()||e.setLoginState(!0),angular.isDefined(a.destinationState)||b.go("tatami.home.home.timeline"))):b.go("tatami.login.main")}),a.$on("$stateChangeError",function(a){a.preventDefault(),b.transitionTo("tatami.pageNotFound",null,{location:!1})}),a.$on("$stateChangeStart",function(c,d,f){a.destinationState=d,a.destinationParams=f,e.isAuthenticated()||d.data&&d.data["public"]||(a.returnToState=d,a.returnToParams=f,c.preventDefault(),b.go("tatami.login.main"))})}]),TatamiApp.config(["$resourceProvider","$locationProvider","$urlRouterProvider","$stateProvider",function(a,b,c,d){a.defaults.stripTrailingSlashes=!1,d.state("tatami",{url:"","abstract":!0,views:{"topMenu@":{templateUrl:"app/shared/topMenu/TopMenuView.html",controller:"TopMenuController"},"":{templateUrl:"index.html"}},resolve:{authorize:["AuthenticationService",function(a){return a.authenticate()}]},data:{"public":!1,roles:["ROLE_USER"]}}).state("tatami.pageNotFound",{templateUrl:"app/shared/error/404View.html",data:{"public":!0}}).state("tatami.accessdenied",{templateUrl:"app/shared/error/500View.html",data:{"public":!0}})}]);var AboutModule=angular.module("AboutModule",[]);AboutModule.config(["$stateProvider",function(a){a.state("tatami.about",{url:"/about","abstract":!0,templateUrl:"app/components/about/AboutView.html"}).state("tatami.about.presentation",{url:"/presentation",views:{aboutBody:{templateUrl:"app/components/about/presentation/PresentationView.html"}},data:{"public":!0}}).state("tatami.about.tos",{url:"/tos",views:{aboutBody:{templateUrl:"app/components/about/tos/ToSView.html"}},data:{"public":!0}}).state("tatami.about.license",{url:"/license",views:{aboutBody:{templateUrl:"app/components/about/license/LicenseView.html",controller:"LicenseController"}},data:{"public":!0}})}]),AboutModule.controller("LicenseController",["$scope",function(a){a.endYear=(new Date).getFullYear()}]),AccountModule.controller("AccountController",["$scope","$location","profileInfo",function(a,b,c){a.profile=c}]);var AccountModule=angular.module("AccountModule",["ProfileModule","PreferencesModule","PasswordModule","FilesModule","UsersModule","GroupsModule","TagsModule","TopPostersModule","ngToast"]);AccountModule.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("tatami.account",{url:"/account","abstract":!0,templateUrl:"app/components/account/AccountView.html",resolve:{profileInfo:["ProfileService",function(a){return a.get().$promise}],userRoles:["$http",function(a){return a({method:"GET",url:"/tatami/rest/account/admin"}).then(function(a){return a.data})}]},controller:"AccountController"}).state("tatami.account.profile",{url:"/profile",templateUrl:"app/components/account/profile/ProfileView.html",resolve:{userLogin:["UserService","profileInfo",function(a,b){return a.get({username:b.username}).$promise}]},controller:"ProfileController"}).state("tatami.account.preferences",{url:"/preferences",templateUrl:"app/components/account/preferences/PreferencesView.html",resolve:{prefs:["PreferencesService",function(a){return a.get().$promise}]},controller:"PreferencesController"}).state("tatami.account.password",{url:"/password",templateUrl:"app/components/account/password/PasswordView.html",controller:"PasswordController"}).state("tatami.account.files",{url:"/files",templateUrl:"app/components/account/files/FilesView.html",resolve:{FilesService:"FilesService",attachmentQuota:function(a){return a.getQuota().$promise},fileList:function(a){return a.query().$promise}},controller:"FilesController"}).state("tatami.account.users",{url:"/users",templateUrl:"app/components/account/FormView.html",controller:"FormController"}).state("tatami.account.users.following",{url:"/following",templateUrl:"app/components/account/users/UsersView.html",resolve:{usersList:["profileInfo","UserService",function(a,b){return b.getFollowing({username:a.username}).$promise}]},controller:"UsersController"}).state("tatami.account.users.recommended",{url:"/recommended",templateUrl:"app/components/account/users/UsersView.html",resolve:{usersList:["UserService",function(a){a.getSuggestions().$promise}]},controller:"UsersController"}).state("tatami.account.users.search",{url:"/search/:q",templateUrl:"app/components/account/users/UsersView.html",resolve:{usersList:["SearchService","$stateParams",function(a,b){return a.query({term:"users",q:b.q}).$promise}]},controller:"UsersController"}).state("tatami.account.groups",{url:"/groups",templateUrl:"app/components/account/FormView.html",controller:"FormController"}).state("tatami.account.groups.main",{url:"",templateUrl:"app/components/account/groups/GroupsView.html",controller:"GroupController"}).state("tatami.account.groups.main.top",{url:"",views:{"create@tatami.account.groups.main":{templateUrl:"app/components/account/groups/creation/GroupsCreateView.html",controller:"GroupsCreateController"}}}).state("tatami.account.groups.main.top.list",{url:"",views:{"list@tatami.account.groups.main":{templateUrl:"app/components/account/groups/list/GroupsListView.html",resolve:{userGroups:["GroupService",function(a){return a.query().$promise}]},controller:"GroupsController"}}}).state("tatami.account.groups.main.top.recommended",{url:"/recommended",views:{"list@tatami.account.groups.main":{templateUrl:"app/components/account/groups/list/GroupsListView.html",resolve:{userGroups:["GroupService",function(a){return a.getRecommendations().$promise}]},controller:"GroupsController"}}}).state("tatami.account.groups.main.top.search",{url:"/search/:q",views:{"list@tatami.account.groups.main":{templateUrl:"app/components/account/groups/list/GroupsListView.html",resolve:{userGroups:["SearchService","$stateParams",function(a,b){return a.query({term:"groups",q:b.q}).$promise}]},controller:"GroupsController"}}}).state("tatami.account.groups.manage",{url:"/:groupId",templateUrl:"app/components/account/groups/manage/GroupsManageView.html",resolve:{group:["GroupService","$stateParams",function(a,b){return a.get({groupId:b.groupId}).$promise}],members:["GroupService","$stateParams",function(a,b){return a.getMembers({groupId:b.groupId}).$promise}]},controller:"GroupsManageController"}).state("tatami.account.tags",{url:"/tags",templateUrl:"app/components/account/FormView.html",controller:"FormController"}).state("tatami.account.tags.following",{url:"/following",templateUrl:"app/components/account/tags/TagsView.html",resolve:{tagList:["TagService",function(a){return a.query().$promise}]},controller:"TagsController"}).state("tatami.account.tags.trends",{url:"/trends",templateUrl:"app/components/account/tags/TagsView.html",resolve:{tagList:["TagService",function(a){return a.getPopular().$promise}]},controller:"TagsController"}).state("tatami.account.tags.search",{url:"/search/:q",templateUrl:"app/components/account/tags/TagsView.html",resolve:{tagList:["SearchService","$stateParams",function(a,b){return 0==b.q.length?{}:a.query({term:"tags",q:b.q}).$promise}]},controller:"TagsController"}).state("tatami.account.topPosters",{url:"/top",templateUrl:"app/components/account/topPosters/TopPostersView.html",resolve:{topPosters:["TopPostersService",function(a){return a.query().$promise}],users:["topPosters","UserService","$q",function(a,b,c){for(var d=[],e=0;e<a.length;++e)d.push(b.get({username:a[e].username}).$promise),d[e].statusCount=a[e].statusCount;return c.all(d)}],userData:["topPosters","users",function(a,b){for(var c=[],d=0;d<a.length;++d)c[a[d].username]=a[d].statusCount;for(var e=[],d=0;d<b.length;++d){var f={};f.info=b[d],f.statusCount=c[b[d].username],e.push(f)}return e}]},controller:"TopPostersController"})}]),AccountModule.controller("FormController",["$scope",function(a){a.$on("$stateChangeSuccess",function(b,c,d,e,f){"tatami.account.groups"===c.name?a.$state.go("tatami.account.groups.main.top.list"):"tatami.account.tags"===c.name?a.$state.go("tatami.account.tags.following"):"tatami.account.users"===c.name&&a.$state.go("tatami.account.users.following")})}]),FilesModule.controller("FilesController",["$scope","$translate","FilesService","attachmentQuota","fileList","ngToast",function(a,b,c,d,e,f){a.quota=d[0],a.fileList=e,a["delete"]=function(d,e){c["delete"]({attachmentId:d},{},function(){a.fileList.splice(e,1),a.$state.reload(),f.create(b.instant("tatami.form.deleted"))})},a.getImgPath=function(a,b,c){return a?"/tatami/thumbnail/"+b+"/"+c:"/img/document_icon.png"},a.setColor=function(){return a.quota<=100&&a.quota>=80?"progress-bar progress-bar-danger":a.quota<80&&a.quota>50?"progress-bar progress-bar-warning":"progress-bar progress-bar-success"}}]);var FilesModule=angular.module("FilesModule",[]);FilesModule.factory("FilesService",function(a){return a("/tatami/rest/attachments/:attachmentId",{},{getQuota:{method:"GET",isArray:!0,url:"/tatami/rest/attachments/quota"}})}),GroupsModule.controller("GroupsController",["$scope","GroupService","SearchService","userGroups","profileInfo",function(a,b,c,d,e){a.userGroups=d,a.current={searchString:a.$stateParams.q},a.search=function(){a.$state.transitionTo("tatami.account.groups.main.top.search",{q:a.current.searchString},{location:!0,inherit:!0,relative:a.$state.$current,notify:!1}),c.query({term:"groups",q:a.current.searchString},function(b){a.userGroups=b})},a.joinLeaveGroup=function(c,d){c.member?b.leave({groupId:c.groupId,username:e.username},null,function(b){b&&a.$state.reload()}):b.join({groupId:c.groupId,username:e.username},null,function(b){b.isMember&&a.$state.reload()})}}]);var GroupsModule=angular.module("GroupsModule",[]);GroupsModule.controller("GroupsCreateController",["$scope","$translate","GroupService","ngToast",function(a,b,c,d){a.current={},a.groups={name:"",description:"",publicGroup:!0,archivedGroup:!1},a.newGroup=function(){a.current.createGroup=!a.current.createGroup},a.cancelGroupCreate=function(){a.reset()},a.reset=function(){a.groups={},a.current.createGroup=!1},a.createNewGroup=function(){c.save(a.groups,function(){a.reset(),a.$state.reload(),d.create({content:b.instant("tatami.account.groups.save")})},function(){d.create({content:b.instant("tatami.form.fail"),"class":"danger"})})}}]),GroupsModule.controller("GroupController",["$scope",function(a){"tatami.account.groups.main"===a.$state.name&&a.$state.go("tatami.account.groups.main.top.list")}]),GroupsModule.controller("GroupsManageController",["$scope","group","GroupService","UserService","members",function(a,b,c,d,e){a.group=b,a.members=e,a.searchedMembers={},a.current={searchString:""},a.updateGroup=function(){c.update({groupId:a.group.groupId},a.group)},a.removeUser=function(b){c.leave({groupId:a.group.groupId,username:b.username},null,function(){a.$state.reload()})},a.search=function(){a.current.searchString?d.searchUsers({term:"search",q:a.current.searchString},function(b){a.searchedMembers=b}):a.searchedMembers={}},a.addUser=function(b){c.join({groupId:a.group.groupId,username:b.username},null,function(){a.$state.reload()})}}]),PasswordModule.controller("PasswordController",["$scope","$translate","PasswordService","ngToast",function(a,b,c,d){a.password={oldPassword:"",newPassword:"",newPasswordConfirmation:""},a.status={oldEmpty:!1,newEmpty:!1,confirmWrong:!1,confirmChange:!1},a.changePassword=function(){a.password.oldPassword?a.password.newPassword?a.password.newPassword!==a.password.newPasswordConfirmation?cofirmWrong=!0:c.save(a.password,function(){a.reset(),d.create(b.instant("tatami.account.password.save"))},function(){d.create({content:b.instant("tatami.form.fail"),"class":"danger"})}):a.newEmpty=!0:a.oldEmpty=!0},a.reset=function(){a.password={},a.status.oldEmpty=!1,a.status.newEmpty=!1,a.status.confirmWrong=!1}}]);var PasswordModule=angular.module("PasswordModule",[]);PasswordModule.factory("PasswordService",function(a){return a("/tatami/rest/account/password")}),PreferencesModule.controller("PreferencesController",["$scope","$translate","PreferencesService","prefs","ngToast",function(a,b,c,d,e){a.prefs=d,a.savePrefs=function(){a.validatePrefs(),c.save(a.prefs,function(){e.create(b.instant("tatami.account.preferences.save"))},function(){e.create({content:b.instant("tatami.form.fail"),"class":"danger"})})},a.validatePrefs=function(){for(var b in a.prefs)if(a.prefs.hasOwnProperty(b)&&null===a.prefs[b]){if("rssUid"===a.prefs[b])continue;a.prefs[b]=!1}}}]);var PreferencesModule=angular.module("PreferencesModule",[]);PreferencesModule.factory("PreferencesService",function(a){return a("/tatami/rest/account/preferences")}),ProfileModule.controller("ProfileController",["$scope","$upload","$translate","ProfileService","profileInfo","userLogin","ngToast",function(a,b,c,d,e,f,g){a.current={avatar:[]},a.uploadStatus={isUploading:!1,progress:0},a.userProfile=e,a.userLogin=f.login,a.updateUser=function(){d.update(a.userProfile,function(){g.create({content:c.instant("tatami.account.profile.save")})},function(){g.create({content:c.instant("tatami.form.fail"),"class":"danger"})})},a.$watch("current.avatar",function(){for(var c=0;c<a.current.avatar.length;++c){var d=a.current.avatar[c];a.uploadStatus.isUploading=!0,a.upload=b.upload({url:"/tatami/rest/fileupload/avatar",file:d,fileFormDataName:"uploadFile"}).progress(function(b){a.uploadStatus.progress=parseInt(100*b.loaded/b.total)}).success(function(b,c,d,e){a.uploadStatus.isUploading=!1,a.uploadStatus.progress=0,a.$state.reload()}).error(function(b,c,d,e){a.uploadStatus.isUploading=!1,a.uploadStatus.progress=0})}})}]);var ProfileModule=angular.module("ProfileModule",[]);TagsModule.controller("TagsController",["$scope","TagService","SearchService","tagList",function(a,b,c,d){a.current={searchString:""},a.tags=d,a.followTag=function(c,d){b.follow({tag:c.name},{name:c.name,followed:!c.followed,trendingUp:c.trendingUp},function(b){a.tags[d].followed=b.followed})},a.search=function(){a.$state.transitionTo("tatami.account.tags.search",{q:a.current.searchString},{location:!0,inherit:!0,relative:a.$state.$current,notify:!1}),0==a.current.searchString.length?a.tags={}:c.query({term:"tags",q:a.current.searchString},function(b){a.tags=b})}}]);var TagsModule=angular.module("TagsModule",[]);TopPostersModule.controller("TopPostersController",["$scope","topPosters","UserService","userData",function(a,b,c,d){a.topPosters=d,a.topPosters.sort(function(a,b){return a.statusCount<b.statusCount?1:-1})}]);var TopPostersModule=angular.module("TopPostersModule",[]);UsersModule.controller("UsersController",["$scope","usersList","SearchService","UserService","userRoles",function(a,b,c,d,e){a.isAdmin=-1!==e.roles.indexOf("ROLE_ADMIN"),a.current={searchString:a.$stateParams.q},a.usersList=b,a.deactivate=function(b,c){d.deactivate({username:b.username},{activate:!0},function(b){a.usersList[c].activated=b.activated})},a.search=function(){a.$state.transitionTo("tatami.account.users.search",{q:a.current.searchString},{location:!0,inherit:!0,relative:a.$state.$current,notify:!1}),c.query({term:"users",q:a.current.searchString},function(b){a.usersList=b})},a.followUser=function(b){d.follow({username:b.username},{friend:!b.friend,friendShip:!0},function(){a.$state.reload()})}}]);var UsersModule=angular.module("UsersModule",[]);UsersModule.factory("UserAccountController",["$scope",function(a){}]),UsersModule.directive("tatamiAccountUser",function(){return{restrict:"E",controller:"UsersController",scope:{user:"=",isAdmin:"="},templateUrl:"/app/components/account/users/directives/UserAccountView.html"}}),AdminModule.controller("AdminController",["$scope","$translate","AdminService","adminData",function(a,b,c,d){a.adminData=d,a.reindex=function(){confirm(b.instant("tatami.admin.confirm"))&&(c.save({options:"reindex"}),a.$state.go("admin",{message:"reindex"}))}}]);var AdminModule=angular.module("AdminModule",[]);AdminModule.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("admin",{url:"/admin?message",templateUrl:"/app/components/admin/AdminView.html",resolve:{adminData:["AdminService","$state",function(a,b){return a.get().$promise.then(function(a){return a},function(a){500===a.status&&b.transitionTo("tatami.accessdenied",null,{location:!1})})}]},controller:"AdminController"})}]),AdminModule.factory("AdminService",["$resource",function(a){return a("/tatami/admin/:options",{options:"@options"})}]);var HomeModule=angular.module("HomeModule",["HomeSidebarModule","ProfileSidebarModule","ngSanitize","angularMoment","infinite-scroll","emguo.poller"]);HomeModule.config(["pollerConfig",function(a){a.resetOnStateChange=!0}]),HomeModule.config(["$stateProvider",function(a){a.state("tatami.home",{url:"/home","abstract":!0,templateUrl:"app/components/home/HomeView.html",resolve:{profile:["ProfileService",function(a){return a.get().$promise}],userRoles:["$http",function(a){return a({method:"GET",url:"/tatami/rest/account/admin"}).then(function(a){return a.data})}]}}).state("tatami.home.status",{url:"/status/:statusId",views:{"homeBodyContent@tatami.home":{templateUrl:"app/components/home/status/StatusView.html",controller:"StatusController"}},resolve:{status:["StatusService","$stateParams","$q",function(a,b,c){return a.get({statusId:b.statusId}).$promise.then(function(a){return angular.equals({},a.toJSON())?c.reject():a})}],context:["StatusService","$stateParams",function(a,b){return a.getDetails({statusId:b.statusId}).$promise}]}}).state("tatami.home.search",{url:"/search/:searchTerm",views:{"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/search/SearchHeaderView.html",controller:"SearchHeaderController"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/status/withoutContext/StatusListView.html",controller:"StatusListController"}},resolve:{statuses:["SearchService","$stateParams",function(a,b){return a.query({term:"status",q:b.searchTerm}).$promise}],showModal:function(){return!1}}}).state("tatami.home.home",{url:"^/home","abstract":!0,resolve:{groups:["GroupService",function(a){return a.query().$promise}],tags:["TagService",function(a){return a.query({popular:!0}).$promise}],suggestions:["UserService",function(a){return a.getSuggestions().$promise}],showModal:function(){return!1}}}).state("tatami.home.home.timeline",{url:"/timeline",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/home/HomeSidebarView.html",controller:"HomeSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/timeline/TimelineHeaderView.html"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/status/withoutContext/StatusListView.html",controller:"StatusListController"}},resolve:{statuses:["StatusService",function(a){return a.getHomeTimeline().$promise}],showModal:["statuses",function(a){return 0===a.length}]}}).state("tatami.home.home.timeline.presentation",{url:"",onEnter:["$stateParams","$modal",function(a,b){b.open({templateUrl:"app/components/home/welcome/WelcomeView.html",controller:"WelcomeController"})}]}).state("tatami.home.home.mentions",{url:"/mentions",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/home/HomeSidebarView.html",controller:"HomeSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/timeline/TimelineHeaderView.html"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/status/withoutContext/StatusListView.html",controller:"StatusListController"}},resolve:{statuses:["HomeService",function(a){return a.getMentions().$promise}]}}).state("tatami.home.home.favorites",{url:"/favorites",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/home/HomeSidebarView.html",controller:"HomeSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/timeline/TimelineHeaderView.html"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/status/withoutContext/StatusListView.html",controller:"StatusListController"}},resolve:{statuses:["HomeService",function(a){return a.getFavorites().$promise}]}}).state("tatami.home.home.company",{url:"/company",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/home/HomeSidebarView.html",controller:"HomeSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/timeline/TimelineHeaderView.html"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/status/withoutContext/StatusListView.html",controller:"StatusListController"}},resolve:{statuses:["HomeService",function(a){return a.getCompanyTimeline().$promise}]}}).state("tatami.home.home.tag",{url:"/tag/:tag",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/home/HomeSidebarView.html",controller:"HomeSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/tag/TagHeaderView.html",controller:"TagHeaderController"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/status/withoutContext/StatusListView.html",controller:"StatusListController"}},resolve:{tag:["TagService","$stateParams",function(a,b){return a.get({tag:b.tag}).$promise}],statuses:["TagService","$stateParams",function(a,b){return a.getTagTimeline({tag:b.tag}).$promise}]}}).state("tatami.home.home.group",{url:"/group/:groupId","abstract":!0,resolve:{group:["GroupService","$stateParams",function(a,b){return a.get({groupId:b.groupId}).$promise}]}}).state("tatami.home.home.group.statuses",{url:"/statuses",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/home/HomeSidebarView.html",controller:"HomeSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/group/GroupHeaderView.html",controller:"GroupHeaderController"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/status/withoutContext/StatusListView.html",controller:"StatusListController"}},resolve:{statuses:["GroupService","$stateParams",function(a,b){return a.getStatuses({groupId:b.groupId}).$promise}]}}).state("tatami.home.home.group.members",{url:"/members",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/home/HomeSidebarView.html",controller:"HomeSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/group/GroupHeaderView.html",controller:"GroupHeaderController"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/user/UserListView.html",controller:"UserListController"}},resolve:{users:["GroupService","$stateParams",function(a,b){return a.getMembers({groupId:b.groupId}).$promise}]}}).state("tatami.home.profile",{url:"/profile/:username","abstract":!0,resolve:{user:["UserService","$stateParams",function(a,b){return a.get({username:b.username}).$promise}],tags:["TagService","$stateParams",function(a,b){return a.query({popular:!0,user:b.username}).$promise}]}}).state("tatami.home.profile.statuses",{url:"/statuses",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/profile/ProfileSidebarView.html",controller:"ProfileSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/profile/ProfileHeaderView.html",controller:"ProfileHeaderController"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/status/withoutContext/StatusListView.html",controller:"StatusListController"}},resolve:{statuses:["StatusService","$stateParams",function(a,b){return a.getUserTimeline({username:b.username}).$promise}],showModal:function(){return!1}}}).state("tatami.home.profile.following",{url:"/following",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/profile/ProfileSidebarView.html",controller:"ProfileSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/profile/ProfileHeaderView.html",controller:"ProfileHeaderController"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/user/UserListView.html",controller:"UserListController"}},resolve:{users:["UserService","$stateParams",function(a,b){return a.getFollowing({username:b.username}).$promise}]}}).state("tatami.home.profile.followers",{url:"/followers",views:{"homeSide@tatami.home":{templateUrl:"app/shared/sidebars/profile/ProfileSidebarView.html",controller:"ProfileSidebarController"},"homeBodyHeader@tatami.home":{templateUrl:"app/components/home/profile/ProfileHeaderView.html",controller:"ProfileHeaderController"},"homeBodyContent@tatami.home":{templateUrl:"app/shared/lists/user/UserListView.html",controller:"UserListController"}},resolve:{users:["UserService","$stateParams",function(a,b){return a.getFollowers({username:b.username}).$promise}]}})}]),HomeModule.controller("GroupHeaderController",["$scope","GroupService","profile","group",function(a,b,c,d){a.profile=c,a.group=d,a.joinLeaveGroup=function(){a.group.member?b.leave({groupId:a.group.groupId,username:a.profile.username},null,function(b){b&&(a.group.member=!b,a.$state.reload())}):b.join({groupId:a.group.groupId,username:a.profile.username},null,function(b){b.isMember&&(a.group.member=b.isMember,a.$state.reload())})}}]),HomeModule.controller("ProfileHeaderController",["$scope","UserService","user",function(a,b,c){a.user=c,a.followUnfollowUser=function(){b.follow({username:a.user.username},{friend:!a.user.friend,friendShip:!0},function(b){a.user.friend=b.friend,a.$state.reload()})}}]),HomeModule.controller("SearchHeaderController",["$scope","$stateParams",function(a,b){a.searchTerm=b.searchTerm}]),HomeModule.controller("StatusController",["$scope","StatusService","profile","status","context","userRoles",function(a,b,c,d,e,f){a.isAdmin=-1!==f.roles.indexOf("ROLE_ADMIN"),a.profile=c,0==e.discussionStatuses.length?a.statuses=[d]:a.statuses=e.discussionStatuses;for(var g=0;g<=e.discussionStatuses.length;g++)try{if(d.statusDate<a.statuses[g].statusDate){a.statuses.splice(g,0,d);break}}catch(h){a.statuses.push(d);break}a.openReplyModal=function(b){a.$state.go(a.$state.current.name+".post",{statusIdReply:b.statusId})},a.isOneDayOrMore=function(a){return moment().diff(moment(a),"days",!0)>=1},a.favoriteStatus=function(c,d){b.update({statusId:c.statusId},{favorite:!c.favorite},function(b){a.statuses[d].favorite=b.favorite})},a.shareStatus=function(c,d){b.update({statusId:c.statusId},{shared:!c.shareByMe},function(b){a.statuses[d].shareByMe=b.shareByMe})},a.announceStatus=function(c){b.update({statusId:c.statusId},{announced:!0},function(){a.$state.reload()})},a.deleteStatus=function(c,d,e){b["delete"]({statusId:c.statusId},null,function(){a.$stateParams.statusId==c.statusId?a.$state.transitionTo("tatami.home.home.timeline"):a.statuses.splice(d,1)})},a.getShares=function(c,d){"STATUS"==c.type&&null==c.shares&&b.getDetails({statusId:c.statusId},null,function(b){a.statuses[d].shares=b.sharedByLogins})}}]),HomeModule.controller("TagHeaderController",["$scope","TagService","tag",function(a,b,c){a.tag=c,a.followUnfollowTag=function(){b.follow({tag:a.tag.name},{name:a.tag.name,followed:!a.tag.followed,trendingUp:a.tag.trendingUp},function(b){a.tag.followed=b.followed,a.$state.reload()})}}]),HomeModule.controller("WelcomeController",["$scope","$modalInstance","$rootScope",function(a,b,c){a.close=function(){b.dismiss()},a.launchPresentation=function(){c.$broadcast("start-tour"),b.dismiss()},b.result["finally"](function(){a.$state.go("tatami.home.home.timeline")})}]);var LoginModule=angular.module("LoginModule",[]);LoginModule.config(["$stateProvider",function(a){a.state("tatami.login",{url:"","abstract":!0,templateUrl:"app/components/login/LoginView.html"}).state("tatami.login.main",{url:"/login?action",views:{manualLogin:{templateUrl:"/app/components/login/manual/ManualLoginView.html",controller:"ManualLoginController"},recoverPassword:{templateUrl:"/app/components/login/recoverPassword/RecoverPasswordView.html",controller:"RecoverPasswordController"},googleLogin:{templateUrl:"/app/components/login/google/GoogleLoginView.html",controller:"GoogleLoginController"},register:{templateUrl:"/app/components/login/register/RegisterView.html",controller:"RegisterController"}},data:{"public":!0}}).state("tatami.registration",{url:"/register?key",templateUrl:"/app/components/login/email/EmailRegistration.html",controller:"EmailRegistrationController",resolve:{update:["RegistrationService","$stateParams",function(a,b){return a.getUpdate({register:"register",key:b.key}).$promise}]},data:{"public":!0}})}]),LoginModule.factory("RegistrationService",["$resource",function(a){return a("/tatami/:register",null,{resetPassword:{method:"POST",url:"/tatami/lostpassword",headers:{"Content-Type":"application/x-www-form-urlencoded"}},getUpdate:{method:"GET"},registerUser:{method:"POST",url:"/tatami/register",headers:{"Content-Type":"application/x-www-form-urlencoded"}}})}]),LoginModule.controller("EmailRegistrationController",["$scope","RegistrationService",function(a,b){}]),LoginModule.controller("GoogleLoginController",["$scope","$http","UserSession",function(a,b,c){a.logout=function(){b.get("/tatami/logout").success(function(){c.clearSession(),a.$state.go("tatami.login.main")})}}]),LoginModule.controller("ManualLoginController",["$scope","$rootScope","$http","AuthenticationService","UserSession",function(a,b,c,d,e){a.user={},a.login=function(){c({method:"POST",url:"/tatami/authentication",transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},data:{j_username:a.user.email,j_password:a.user.password,_spring_security_remember_me:a.user.remember},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(c){"loginFailure"===c.action?a.$state.go("tatami.login.main",{action:c.action}):(e.setLoginState(!0),angular.isDefined(b.returnToState)||angular.isDefined(b.returnToStateParams)?a.$state.go(b.returnToState.name,b.returnToParams):a.$state.go("tatami.home.home.timeline"))}).error(function(a,b,c,d){console.log("Error"),console.log(a)})}}]),LoginModule.controller("RecoverPasswordController",["$scope","RegistrationService",function(a,b){a.user={},a.resetPassword=function(){var c="email="+a.user.email;b.resetPassword(c).$promise.then(function(b){a.$state.go("tatami.login.main",{action:b.action}),a.user.email=""},function(a){console.log(a)})}}]),LoginModule.controller("RegisterController",["$scope","RegistrationService",function(a,b){a.user={},a.registerUser=function(){var c="email="+a.user.email;b.registerUser(c).$promise.then(function(b){a.$state.go("tatami.login.main",{action:b.action}),a.user.email=""},function(a){console.log(a)})}}]),marked.setOptions({gfm:!0,pedantic:!1,sanitize:!0,highlight:null,urls:{youtube:function(a,b){var c;return(c=/(youtu\.be\/|youtube\.com\/(watch\?(.*&)?v=|(embed|v)\/))([^\?&"'>]+)/.exec(b))?'<iframe width="420" height="315" src="https://www.youtube.com/embed/'+c[5]+'" frameborder="0" allowfullscreen></iframe>':void 0},vimeo:function(a,b){var c;return(c=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/.exec(b))?'<iframe src="https://player.vimeo.com/video/'+c[5]+'" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':void 0},dailymotion:function(a,b){var c;return(c=/^.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/.exec(b))?'<iframe frameborder="0" width="480" height="271" src="https://www.dailymotion.com/embed/video/'+c[2]+'"></iframe>':void 0},gist:function(a,b){var c;return(c=/^.+gist.github.com\/(([A-z0-9-]+)\/)?([0-9A-z]+)/.exec(b))?($.ajax({
url:c[0]+".json",dataType:"jsonp",success:function(a){if(a.stylesheet&&0===$('link[href="'+a.stylesheet+'"]').length){var b=document.createElement("link"),d=document.getElementsByTagName("head")[0];b.type="text/css",b.rel="stylesheet",b.href=a.stylesheet,d.insertBefore(b,d.firstChild)}var e=$(".gist"+c[3]);e.html(a.div)}}),'<div class="gist'+c[3]+'"/>'):void 0}}}),TatamiApp.run(["amMoment",function(a){a.changeLocale("en")}]),moment.locale("en",{relativeTime:{future:"",past:"%s",s:"1s",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"}}),TatamiApp.config(["$translateProvider",function(a){a.translations("en",{tatami:{pageNotFound:"Page not found.",error:"An error has occurred.",welcome:{title:"Welcome to Tatami",message:"Your timeline is empty! Do you need help to learn how to use Tatami? Please click on the button below to launch a presentation.",presentation:"Launch presentation",help:{title:"Help",line1:"Welcome to the online help!",line2:" Follow the next steps for a tour of the main Tatami features."},timeline:{title:"Timeline",line1:"This is your timeline. It displays all messages",bulletPoint1:"mentioning you or sent privately to you",bulletPoint2:"sent by users you follow",bulletPoint3:"sent by yourself",bulletPoint4:"sent to group you are subscribed to",afterBP1:"If it's empty, don't worry, it will get updated as soon as you start following other users!",afterBP2:"When viewing a message, you can reply to it and mark it as a favorite to find it easily later.",afterBP3:"If a message already has some replies, you can see them all by clicking on the timestamp or clicking 'View Conversation'."},post:{title:"Posting Messages",line1:"Here is where you write messages you want to share",bulletPoint1:"All messages are public by default. They will be delivered to all users who follow you.",bulletPoint2:"When writing a message you should use <i>#hashtags</i>. This simply means adding a # at the beginning of important words that can be used to find your message.",bulletPoint3:"When mentioning or replying to other users you should add a @ at the beginning of their name. They will be notified that you are talking to them."},groups:{title:"Groups",line1:"This is the list of groups you are a member of.",line2:"You can find and subscribe to public groups in the Account/Groups page (top-right menu).",line3:"There are also private groups. You cannot subscribe to these. The owner of the group must add you as a member."},trends:{title:"Trends",line1:"This list represents the #hashtags that are currently the most often used on Tatami. Use this to discover what's going on and what are the hottest topics on Tatami!"},whoToFollow:{title:"Who To Follow",line1:"This is a list of users who share common interests with you and who you could follow.",line2:"If you are a new user, this list is probably empty. Tatami needs some time to learn who you are in order to suggest relevant users.",line3:"And don't forget to use #hashtags in your messages. It makes everything easier!"},next:"Next",previous:"Prev",end:"End"},login:{title:"Login",mainTitle:"Welcome to Tatami",subtitle:"An open source enterprise social network",moreInfo:"More Info",email:"Email",password:"Password",remember:"Remember me",forgotPassword:"Forgot your password?",resetPassword:"Reset password",tos:"Terms of Service",fail:"Your authentication has failed! Are you sure you used the correct password?",passwordEmailSent:"An e-mail has been sent to you, with instructions to generate a new password.",unregisteredEmail:"This e-mail address is not registered in Tatami.",register:{title:"Register",line1:"A confirmation email will be sent to the address you provide.",line2:"Your email's domain will determine the company space you join. For example, users with an email@ippon.fr address will join Ippon's private space.",line3:"If you are the first employee of your company to join Tatami, your company's private space will be automatically created."},googleApps:{title:"Google Apps Login",line1:"This feature is for Google Apps for Work users, who have their work domain name managed by Google Apps.",link:"For more information on Google Apps for Work click here.",line2:"Whether or not you already have a Tatami account, you can sign in with your Google Apps account.",line3:"Your email will be provided by Google and your email's domain name will be used to allow you to join your company's private space.",login:"Login using Google Apps"},validation:"E-mail validation",passwordSuccess:"Your e-mail has been validated. Your password will be e-mailed to you.",returnHome:"Go to the home page",registrationEmail:"Thank you! A registration e-mail has been sent to you."},about:{presentation:{title:"What is Tatami?",devices:"Devices",openSource:"Open Source",row1:{title:"A private, enterprise social network",line1:"Update your status to inform your co-workers",line2:"Subscribe to other employees' time lines",line3:"Share important information to your followers",line4:"Discuss and reply to your colleagues",line5:"Put important information into favorites",line6:"Search useful information with our integrated search engine",line7:"Use hashtags to find related information",line8:"Go to your co-workers' profiles to see what they are working on",line9:"English and French versions available, adding other languages is easy"},row2:{title:"Works on all devices!",line1:"Dynamic web application (HTML5): nothing to install, except a modern browser!",line2:"Works on mobile devices, tablets, or standard computers: the application adapts itself automatically to your device's screen",line3:"Stay connected with your enterprise wherever you are"},row3:{title:"Easy installation and integration with your company's IT infrastructure",line1:"Standard Java application",line2:"Your data belongs to you, not to your SaaS vendor!",line3:"Integrates with your LDAP directory",line4:"Integrates with Google Apps",line5:"Fully Open Source, with a business-friendly Apache 2.0 license",line6:"Easy to extend or modify according to your needs",line7:"High performance (based on Apache Cassandra), even on small hardware",line8:"Join the project and submit patches on our Github page:"},row4:{title:"Also available in SaaS mode, fully managed by Ippon Technologies",line1:"If you do not want to install Tatami in your company, it's easy to use directly",line2:"Secured multi-enterprise mode: every company has its own private space",line3:"256 bits SSL encryption: all data transfers are fully secured"},row5:{title:"Need more information on our product?",line1:"Our sales team is looking forward to hearing from you! Call us at +33 01 46 12 48 48 or email us at"}},tos:{title:"Terms of Service"},license:{title:"Source Code License",copyright:"Copyright"}},home:{timeline:"Timeline",mentions:"Mentions",favorites:"Favorites",companyTimeline:"Company Timeline",newMessage:"New Message",newMessages:"New Messages",menu:{logo:"Ippon Technologies Logo",title:"Tatami",about:{title:"About",presentation:"Presentation",tos:"Terms of Service",language:{language:"Language",en:"English",fr:"Français"},license:"Source Code License",github:{issues:"Submit a Bug Report",fork:"Fork Tatami on Github"},ippon:{website:"Ippon Technologies Website",blog:"Ippon Technologies Blog",twitter:"Follow @ippontech on Twitter"}},search:"Search",help:"Help",account:{title:"Account",companyTimeline:"Company Timeline",logout:"Logout"}},post:{mandatory:"Comment is mandatory",content:{mandatory:"Please fill out this field."},update:"Update your status",replyTo:"Reply",preview:"Preview",edit:"Edit",characters:{left:"Characters Left:"},options:"Options",shareLocation:"Share Location",group:"Group",reply:"Reply to this status",files:"Files",drop:{file:"Drop your files here"},markdown:"Markdown Supported",button:"Post"},sidebar:{myGroups:"My Groups",whoToFollow:"Who To Follow",trends:"Trends","public":"PUB","private":"PVT",archived:"ARC",administrator:"A",publicToolTip:"Public Group",privateToolTip:"Private Group",archivedToolTip:"Archived Group",administratorToolTip:"You administer this group."},status:{replyTo:"In reply to","private":"Private Message",reply:"Reply",share:"Share",favorite:"Favorite","delete":"Delete",confirmDelete:"Are you sure you want to delete this status?",sharedYour:"shared your status",followed:"followed you",shared:"shared",groupAdmin:"Group Administrator",announce:"Announce",isAnnounced:"Announced by",viewConversation:"View Conversation",shares:"Shares"},tag:{title:"Tag",follow:"Follow",following:"Following",unfollow:"Unfollow"},group:{join:"Join",joined:"Joined",leave:"Leave",manage:"Manage",statuses:"Statuses",members:"Members",membersSingular:"1 Member",membersPlural:"{{ amount }} Members"},profile:{statuses:"Statuses",following:"Following",followers:"Followers",follow:"Follow",unfollow:"Unfollow",followsYou:"Follows You",youStatusesSingular:"Your 1 status",youStatusesPlural:"Your {{ amount }} statuses",youFollowingSingular:"You follow 1 person",youFollowingPlural:"You follow {{ amount }} people",youFollowersSingular:"Your 1 follower",youFollowersPlural:"Your {{ amount }} followers",userStatusesSingular:"@{{ username }} posted 1 status",userStatusesPlural:"@{{ username }} posted {{ amount }} statuses",userFollowingSingular:"@{{ username }} follows 1 person",userFollowingPlural:"@{{ username }} follows {{ amount }} people",userFollowersSingular:"@{{ username }} has 1 follower",userFollowersPlural:"@{{ username }} has {{ amount }} followers",deactivatedUser:"Deactivated User",sidebar:{information:"Information",statistics:"Statistics",firstName:"First Name",lastName:"Last Name",email:"Email",jobTitle:"Job Title",phoneNumber:"Phone Number",statuses:"Statuses",following:"Following",followers:"Followers",trends:"Trends"}},searchPage:{title:"Search",statusesWith:"Statuses with"}},account:{profile:{title:"Profile",dropPhoto:"Drop your photo here to update it",update:"Update your profile",email:"Email",firstName:"First Name",lastName:"Last Name",jobTitle:"Job Title",phoneNumber:"Phone Number","delete":"Delete your account",confirmDelete:"You are about to delete your account. Are you sure?",save:"Your profile has been saved"},preferences:{title:"Preferences",notifications:"Notifications",notification:{email:{mention:"Get notified by email when you are mentioned",dailyDigest:"Get a daily digest email",weeklyDigest:"Get a weekly digest email"},rss:{timeline:"Allow RSS feed publication of your timeline",link:"Link to your timeline RSS stream"}},save:"Your preferences have been saved"},password:{title:"Password",update:"Update your password",old:"Old Password","new":"New Password",confirm:"Confirm New Password",save:"Your password has been changed"},files:{title:"Files",filename:"Filename",size:"Size",date:"Date","delete":"Delete"},users:{title:"Users",following:"Following",recommended:"Recommended",search:"Search",deactivated:"This user is deactivated"},groups:{title:"Groups",createNewGroup:"Create a new group",name:"Name",description:"Description","public":"Public","private":"Private",publicWarning:"Warning: If this group is public, everybody can access it",create:"Create",myGroups:"My Groups",recommended:"Recommended",search:"Search",group:"Group",access:"Access",members:"Members",manage:"Manage",update:"Update group details",archive:"Do you want to archive this group?",allowArchive:"Yes, this group should be archived",denyArchive:"No, this group is still in use",archiveWarning:"Warning: Archived groups are read-only",addMember:"Add a member",username:"Username",role:"Role",admin:"Administrator",member:"Member",join:"Join",joined:"Joined",leave:"Leave",archived:"Archived",add:"Add",remove:"Remove",save:"Your group has been created"},tags:{title:"Tags",trends:"Trends",search:"Search",tag:"Tag",follow:"Follow",following:"Following",unfollow:"Unfollow"},topPosters:{title:"Top Posters",username:"Username",count:"Status Count"}},form:{cancel:"Cancel",save:"Save",success:"The form has been successfully saved.",fail:"Failed to save form.",deleted:"Your file has been deleted."},admin:{title:"Administration Dashboard",registered:"Registered Enterprises",domain:"Domain",count:"# of users",environment:"Environnement Variables (from tatami.properties)",propery:"Property",value:"Value",reindex:"Re-index Search Engine",confirm:"Are you sure you want to re-index Search Engine?",success:"Search engine re-indexation has succeeded.",deactivate:"Deactivate",activate:"Activate"}}}),a.translations("fr",{tatami:{error:"Il y a une erreur",pageNotFound:"Page non trouvée.",welcome:{title:"Bienvenue à Tatami",message:"Votre timeline est vide! Avez-vous besoin d'aide pour apprendre à utilizer Tatami? Veuillez clicker sur le bouton ci-dessous pour lancer une présentation.",presentation:"Lancer la présentation",help:{title:"Aide",line1:"Bienvenue à l'aide en ligne!",line2:" Suivez les étapes suivantes pour une tournée des principales caractéristiques de Tatami ."},timeline:{title:"Timeline",line1:"Ceci est votre timeline. Il affiche tous les messages",bulletPoint1:"vous mentionner ou envoyé en privé à vous",bulletPoint2:"envoyé par les utilisateurs que vous suivez",bulletPoint3:"envoyé par vous-même ",bulletPoint4:"envoyé à un groupe que vous êtes abonné",afterBP1:"Si elle est vide, ne vous inquiétez pas, elle sera mise à jour dès que vous commencez à suivre d'autres utilisateurs!",afterBP2:"Lors de l'affichage d'un message, vous pouvez y répondre et la marquer comme favori pour le retrouver plus facilement.",afterBP3:"Si un message avait déjà obtenu quelques réponses, vous pouvez voir tous les détails en cliquant sur detail: ce sera plus facile de suivre la conversation sur Tatami."},post:{title:"Envoyer un message",line1:"C'est ici que vous écrivez vos messages que vous souhaitez partager",bulletPoint1:"tous les messages sont publiques par défaut. Ils seront livrés à tous les utilisateurs qui vous suivent",bulletPoint2:"pour écrire un message, vous devez utiliser #hashtags: cela signifie tout simplement l'ajout d'un «#» au début de mots importants qui peut être utilisé pour trouver votre message",bulletPoint3:"en mentionnant, ou répondre à d'autres utilisateurs, vous devez ajouter un @ au début de leur nom: ils seront informés que vous vous adressez à eux"},groups:{title:"Groupes",line1:"Ceci est la liste des groupes que vous êtes un membre de.",line2:"Vous pouvez trouver et vous abonner à, groupe public dans la page Account/Groupes (menu en haut à droite).",line3:"Il y a aussi des groupes privés: pour eux vous ne pouvez pas vous inscrire: le propriétaire du groupe doit vous ajouter en tant que membre."},trends:{title:"Tendances",line1:"Cette liste représente les #hashtag qui sont les plus souvent utilisés sur Tatami. Utilisez-le pour découvrir ce qui ce passe et quels sont les sujets les plus chauds sur Tatami!"},whoToFollow:{title:"Utilisateurs suggérées",line1:"Ceci est une liste d'utilisateurs qui partagent des intérêts communs avec vous et que vous pourriez suivre.",line2:"Si vous êtes un nouvel utilisateur, cette liste est probablement vide: Tatami a besoin de temps pour apprendre qui vous êtes afin de vous proposer des utilisateurs",line3:"Et n'oubliez pas d'utiliser des #hashtags dans vos messages, il rend tout plus facile!"},next:"Suivant",previous:"Précédent",end:"Fin"},login:{title:"Login",mainTitle:"Bienvenue à Tatami",subtitle:"Un réseau social d'entreprise open source",moreInfo:"Plus d'info",email:"Email",password:"Mot de passe",remember:"Souviens-moi",forgotPassword:"Mot de passe oublié?",resetPassword:"Nouveau mot de passe",tos:"Conditions de service",fail:"Votre authentification a échoué! Etes-vous sûr que vous avez utilisé un mot de passe correct?",passwordEmailSent:"Un e-mail vous a été envoyé, avec des instructions pour générer un nouveau mot de passe.",unregisteredEmail:"Cette adresse e-mail n'est pas enregistré avec Tatami.",register:{title:"Enregistré",line1:"Un email de confirmation sera envoyé à l'adresse que vous fournissez.",line2:"Le domaine de votre email détermine l'espace de l'entreprise que vous allez rejoindre. Par exemple, les utilisateurs ayant une adresse email@ippon.fr vont joindre l'espace privées de Ippon.",line3:"Si vous êtes le premier employé de votre entreprise à se joindre à Tatami, l'espace privé de votre entreprise sera automatiquement créé."},googleApps:{title:"Google Apps Login",line1:"Cette fonction est pour les utilisateurs de Google Apps pour de travail, qui ont leur nom de domaine de travail géré par Google Apps.",link:"Pour plus d'informations sur Google Apps pour le travail, cliquez ici.",line2:"Si oui ou non vous avez déjà un compte Tatami, vous pouvez vous connecter avec votre compte Google Apps.",line3:"Votre e-mail sera fourni par Google et le nom du domaine de votre e-mail sera utilisé pour vous permettre de rejoindre l'espace privé de votre entreprise.",login:"Login avec Google Apps"},validation:"Validation e-mail",passwordSuccess:"Votre e-mail a été validé. Votre mot de passe sera envoyé par e-mail à vous.",returnHome:"Allez à la page d'accueil",registrationEmail:"Merci! Une inscription e-mail a été envoyé vers vous."},about:{presentation:{title:"Qu'est-ce que c'est Tatami?",devices:"Appareils",openSource:"Open Source",row1:{title:"Un réseau social d'entreprise privée",line1:"Mettre à jour votre statut afin d'informer vos collègues",line2:"Abonnez-vous aux timeline des autres employés",line3:"Partager des informations importantes au personnes qui vous suivent",line4:"Discuter et répondre à vos collègues",line5:"Mettez des informations importantes à vos favoris",line6:"Rechercher des informations utiles avec notre moteur de recherche intégré",line7:"Utilisez hashtags trouver des informations associé",line8:"Aller aux profils de vos collègues pour voir ce qu'ils travaillent sur",line9:"Des version Anglaise et Française sont disponible, c'est aussi facile d'ajouter d'autre langue"},row2:{title:"Fonctionne sur tous les appareils!",line1:"Application web dynamique (HTML5): rien à installer, à l'exception d'un navigateur moderne!",line2:"Fonctionne sur les appareils mobiles, des tablets ou des ordinateurs: l'application s'adapte automatiquement à l'écran de votre appareil",line3:"Restez connecté avec votre entreprise où que vous soyez"},row3:{title:"Installation et intégration facile avec l'infrastructure informatique de votre entreprise",line1:"Application standard Java",line2:"Vos données vous appartient, pas à votre fournisseur SaaS!",line3:"Intégration avec votre dossier LDAP",line4:"Intégration avec Google Apps",line5:"Entièrement Open Source, avec une licence Apache 2.0, qui est sympa pour les entreprises",line6:"Facile à étendre ou modifier selon vos besoins",line7:"Haute performance (basé sur Cassandra d'Apache), même sur les petits hardware",line8:"Rejoignez le projet et proposer des patches sur notre page Github:"},row4:{title:"Egalement disponible en mode SaaS, entièrement géré par Ippon Technologies",line1:"Si vous ne souhaitez pas installer Tatami dans votre entreprise, il est facile de l'utiliser directement",line2:"Mode multi-entreprise sécurisé: chaque entreprise dispose de son propre espace privé",line3:"Cryptage SSL 256 bits: tous les transferts de données sont entièrement sécurisé"},row5:{title:"Besoin de plus d'informations sur notre produit?",line1:"Notre équipe de vente est impatient de vous entendre! Appelez-nous au +33 01 46 12 48 48 ou par courriel à"}},tos:{title:"Conditions de service"},license:{title:"Licence du source code",copyright:"Droit d'auteur"}},home:{timeline:"Timeline",mentions:"Mentions",favorites:"Favoris",companyTimeline:"Timeline de votre entreprise",newMessage:"Nouveau Message",newMessages:"Nouveau Messages",menu:{logo:"Ippon Technologies Logo",title:"Tatami",about:{title:"Information",presentation:"Présentation",tos:"Conditions de service",language:{language:"Language",en:"English",fr:"Français"},license:"License du source code",github:{issues:"Envoyer un rapport de bug",fork:"Fork Tatami sur Github"},ippon:{website:"Site d'Ippon Technologies",blog:"Blog d'Ippon Technologies Blog",twitter:"Suivez @ippontech sur Twitter"}},search:"Recherchez",help:"Aide",account:{title:"Compte",companyTimeline:"Timeline de votre enterprise",logout:"Déconnexion"}},post:{mandatory:"Commentaire est obligatoire",content:{mandatory:"S'il vous plaît remplir ce champ.."},update:"Mettre à jour votre statut",replyTo:"Répondre",preview:"Prévisualisation",edit:"Editer",characters:{left:"Caractères restants:"},options:"Options",shareLocation:"Partager votre localisation",group:"Groupe",reply:"Répondre à ce statut",files:"Fichiers",drop:{file:"Déposez vos fichiers ici"},markdown:"Markdown Supported",button:"Post"},sidebar:{myGroups:"Mes Groupes",whoToFollow:"Qui Suivre",trends:"Tendances","public":"PUB","private":"PVT",archived:"ARC",administrator:"A",publicToolTip:"Groupe public",privateToolTip:"Groupe privé",archivedToolTip:"Groupe archivé",administratorToolTip:"Vous administrez ce groupe."},status:{replyTo:"En réponse à","private":"Message privé",reply:"Répondre",share:"Partager",favorite:"Favoris","delete":"Suprimez",confirmDelete:"Êtes-vous sûr de vouloir supprimer ce statut?",sharedYour:"a partagé votre statut",followed:"vous suit",shared:"partagé",groupAdmin:"Administrateur du groupe",announce:"Annoncer",isAnnounced:"Annoncé par",viewConversation:"Voir La Conversation",shares:"Partages"},tag:{title:"Tag",follow:"Abonnés",following:"Abonnements",unfollow:"Se désabonné"},group:{join:"Joindre",joined:"Joined",leave:"Quitter",manage:"Gérer",statuses:"Statuts",members:"Membres",membersSingular:"1 Membre",membersPlural:"{{ amount }} Membres"},profile:{statuses:"Statuts",following:"Abonnement",followers:"Abonnés",follow:"Suivre",unfollow:"Se désabonner",followsYou:"Vous suivre",youStatusesSingular:"Votre 1 statut",youStatusesPlural:"Vos {{ amount }} statuts",youFollowingSingular:"Vous êtes abonné à 1 personne",youFollowingPlural:"Vous êtes abonné à {{ amount }} personnes",youFollowersSingular:"1 personne vous suivre",youFollowersPlural:"{{ amount }} personnes vous suivre",userStatusesSingular:"@{{ username }} a partagé un statut",userStatusesPlural:"@{{ username }} a partagé {{ amount }} statuts",userFollowingSingular:"@{{ username }} suit 1 personne",userFollowingPlural:"@{{ username }} suit {{ amount }} personnes",userFollowersSingular:"@{{ username }} a 1 abonnement",userFollowersPlural:"@{{ username }} a {{ amount }} abonnements",deactivatedUser:"Désactivé l'utilisateur",sidebar:{information:"Information",statistics:"Statistiques",firstName:"Prénom",lastName:"Nom",email:"Email",jobTitle:"Titre du travail",phoneNumber:"Numero de telephone",statuses:"Statuts",following:"Abonnement",followers:"Abonné",trends:"Tendances"}},searchPage:{title:"Recherchez",statusesWith:"Statuts avec"}},account:{profile:{title:"Profil",dropPhoto:"Déposez votre photo ici pour la mettre à jour",update:"Mettez à jour votre profil",email:"Email",firstName:"Prénom",lastName:"Nom",jobTitle:"Titre de travail",phoneNumber:"Numero de telephone","delete":"Supprimez votre compte",confirmDelete:"Vous êtes sur le point de supprimer votre compte. Êtes-vous sûr?",save:"Votre profil a été sauvé"},preferences:{title:"Preferences",notifications:"Notifications",notification:{email:{mention:"Recevez une notification par email lorsque vous êtes mentionné",dailyDigest:"Obtenez un résumé quotidien email",weeklyDigest:"Obtenez un sommaire hebdomadaire email"},rss:{timeline:"Autoriser RSS publication de votre fils d'actualité",link:"Lien de votre RSS fils d'actualité"}},save:"Vos préférences ont été sauvegardées"},password:{title:"Mot de passe",update:"Changez votre mot de passe",old:"Ancien mot de passe","new":"Nouveau mot de passe",confirm:"Confirmer votre nouveau mot de passe",save:"Votre mot de passe a été changé"},files:{title:"Fichier",filename:"Nom de fichier",size:"Taille",date:"Date","delete":"Supprimez"},users:{title:"Utilisateur",following:"Abonné",recommended:"Recommendé",search:"Recherchez",deactivated:"Cet utilisateur est désactivé"},groups:{title:"Groupes",createNewGroup:"Créer un nouveau groupe",name:"Nom",description:"Description","public":"Public","private":"Privé",publicWarning:"Attention: Si ce groupe est public, tout le monde peut y accéder",create:"Créer",myGroups:"Mes Groupes",recommended:"Recommandé",search:"Rechercher",group:"Groupe",access:"Accès",members:"Membres",manage:"Gérer",update:"Mettre à jour let détails de votre groupe",archive:"Voulez-vous archiver ce groupe?",allowArchive:"Oui, ce groupe devrait être archivée",denyArchive:"Non, ce groupe est encore en usage",archiveWarning:"Attention: Groupe archivé sont en lecture seule",addMember:"Ajouter un member",username:"Username",role:"Rôle",admin:"Administrator",member:"Membre",join:"Joindre",joined:"Joignit",leave:"Quitter",archived:"Archivé",add:"Ajouter",remove:"Supprimer",save:"Votre groupe a été créé"},tags:{title:"Tags",trends:"Tendances",search:"Recherchez",tag:"Tag",follow:"Abonné",following:"Abonnement",unfollow:"Se désabonné"},topPosters:{title:"Top Posters",username:"Username",count:"Combien de Statuts"}},form:{cancel:"Annuler",save:"Sauvegarder",success:"Le formulaire a été enregistré avec succès.",fail:"Impossible de sauvegarder le formulaire.",deleted:"Votre fichier a été supprimé."},admin:{title:"Dashboard d'administration",registered:"Entreprises enregistrées",domain:"Domaine",count:"# d'utilisateur(s)",environment:"Variables d'environnement (de tatami.properties)",propery:"Property",value:"Valeur",reindex:"Ré-indexation du moteur de recherche",confirm:"Êtes-vous sûr que vous voulez ré-indexer les moteurs de recherche?",success:"La ré-indexation du moteur de recherche a réussi.",deactivate:"Désactiver",activate:"Activer"}}}),a.useCookieStorage(),a.registerAvailableLanguageKeys(["en","fr"]),a.fallbackLanguage("en"),a.determinePreferredLanguage()}]),TatamiApp.filter("emoticon",function(){return function(a){function b(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}if(null==a)return a;var c={">:(":"/assets/img/emoticons/angry.png",":$":"/assets/img/emoticons/blushing.png","8)":"/assets/img/emoticons/cool.png","B)":"/assets/img/emoticons/cool.png",":'(":"/assets/img/emoticons/crying.png",":(":"/assets/img/emoticons/frowning.png",":o":"/assets/img/emoticons/gasping.png",":O":"/assets/img/emoticons/gasping.png",":D":"/assets/img/emoticons/grinning.png","<3":"/assets/img/emoticons/heart.png",XD:"/assets/img/emoticons/laughing.png",":x":"/assets/img/emoticons/lips_sealed.png",":X":"/assets/img/emoticons/lips_sealed.png",":#":"/assets/img/emoticons/lips_sealed.png",">:D":"/assets/img/emoticons/malicious.png",":3":"/assets/img/emoticons/naww.png",":(":"/assets/img/emoticons/pouting.png",":)":"/assets/img/emoticons/smiling.png",":|":"/assets/img/emoticons/speechless.png",">:)":"/assets/img/emoticons/spiteful.png",o_O:"/assets/img/emoticons/surprised.png","D:":"/assets/img/emoticons/terrified.png",":-1:":"/assets/img/emoticons/thumbs_down.png",":+1:":"/assets/img/emoticons/thumbs_up.png",XP:"/assets/img/emoticons/tongue_out_laughing.png",":p":"/assets/img/emoticons/tongue_out.png",":P":"/assets/img/emoticons/tongue_out.png",":/":"/assets/img/emoticons/unsure.png",";)":"/assets/img/emoticons/winking_grinning.png",";p":"/assets/img/emoticons/winking_tongue_out.png",";P":"/assets/img/emoticons/winking_tongue_out.png",";)":"/assets/img/emoticons/winking.png"};for(var d in c){var e=new RegExp("(^| )"+b(d)+"($| )");a=a.replace(e," !["+d+"]("+c[d]+") ")}return a}}),TatamiApp.filter("markdown",["$sce",function(a){return function(b){return b?a.trustAsHtml(marked(b)):""}}]),TatamiApp.filter("placeholderFilter",["$translate",function(a){return function(b){return b?"":a.instant("tatami.home.post.update")}}]),HomeModule.controller("StatusListContextController",["$scope","$q","$timeout","$window","StatusService","HomeService","TagService","GroupService","profile","statuses","statusesWithContext","userRoles","showModal","poller",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){if(m&&a.$state.includes("tatami.home.home.timeline")&&a.$state.go("tatami.home.home.timeline.presentation"),a.isAdmin=-1!==l.roles.indexOf("ROLE_ADMIN"),a.profile=i,a.statusesWithContext=k,a.busy=!1,0==j.length?a.end=!0:(a.end=!1,a.finish=j[j.length-1].timelineId),a.newMessages=null,d.document.title="Tatami",a.$state.is("tatami.home.home.timeline")){var o=2e4;c(function(){var b=n.get(e,{action:"getHomeTimeline",delay:o,smart:!0,argumentsArray:[{start:j[0].timelineId}]});b.promise.then(null,null,function(b){b.length>0&&(a.newMessages=b.length,d.document.title="Tatami ("+b.length+")")})},o)}a.loadMore=function(){a.busy||a.end||(a.busy=!0)},a.openReplyModal=function(b){a.$state.go(a.$state.current.name+".post",{statusId:b.statusId})},a.isOneDayOrMore=function(a){return moment().diff(moment(a),"days",!0)>=1},a.favoriteStatus=function(b){e.update({statusId:b.statusId},{favorite:!b.favorite},function(b){a.$state.reload()})},a.shareStatus=function(b){e.update({statusId:b.statusId},{shared:!b.shareByMe},function(b){a.$state.reload()})},a.announceStatus=function(b){e.update({statusId:b.statusId},{announced:!0},function(){a.$state.reload()})},a.deleteStatus=function(b,c){e["delete"]({statusId:b.statusId},null,function(){a.$state.reload()})},a.getShares=function(b,c,d){"STATUS"==b.type&&null==b.shares&&e.getDetails({statusId:b.statusId},null,function(b){null==d?a.statusesWithContext[c].status.shares=b.sharedByLogins:a.statusesWithContext[c].replies[d].shares=b.sharedByLogins})}}]),HomeModule.controller("StatusListController",["$scope","$timeout","$window","StatusService","HomeService","TagService","GroupService","profile","statuses","userRoles","showModal","poller",function(a,b,c,d,e,f,g,h,i,j,k,l){if(k&&a.$state.includes("tatami.home.home.timeline")&&a.$state.go("tatami.home.home.timeline.presentation"),a.isAdmin=-1!==j.roles.indexOf("ROLE_ADMIN"),a.profile=h,a.statuses=i,a.busy=!1,0==a.statuses.length?a.end=!0:(a.end=!1,a.finish=a.statuses[a.statuses.length-1].timelineId),a.newMessages=null,c.document.title="Tatami",a.$state.is("tatami.home.home.timeline")){var m=2e4;b(function(){var b=l.get(d,{action:"getHomeTimeline",delay:m,smart:!0,argumentsArray:[{start:i[0].timelineId}]});b.promise.then(null,null,function(b){b.length>0&&(a.newMessages=b,c.document.title="Tatami ("+b.length+")")})},m)}a.loadNewStatuses=function(){for(var b=a.newMessages.length-1;b>=0;b--)a.statuses.unshift(a.newMessages[b]);c.document.title="Tatami",a.newMessages=null};var n=function(b){if(0==b.length)return void(a.end=!0);for(var c=0;c<b.length;c++)a.statuses.push(b[c]);a.finish=a.statuses[a.statuses.length-1].timelineId,a.busy=!1};a.loadMore=function(){a.busy||a.end||(a.busy=!0,"tatami.home.home.timeline"==a.$state.current.name&&d.getHomeTimeline({finish:a.finish},n),"tatami.home.home.company"==a.$state.current.name&&e.getCompanyTimeline({finish:a.finish},n),"tatami.home.home.mentions"==a.$state.current.name&&e.getMentions({finish:a.finish},n),"tatami.home.home.tag"==a.$state.current.name&&f.getTagTimeline({tag:a.$stateParams.tag,finish:a.finish},n),"tatami.home.home.group.statuses"==a.$state.current.name&&g.getStatuses({groupId:a.$stateParams.groupId,finish:a.finish},n),"tatami.home.profile.statuses"==a.$state.current.name&&d.getUserTimeline({username:a.$stateParams.username,finish:a.finish},n))},a.openReplyModal=function(b){a.$state.go(a.$state.current.name+".post",{statusId:b.statusId})},a.isOneDayOrMore=function(a){return moment().diff(moment(a),"days",!0)>=1},a.favoriteStatus=function(b,c){d.update({statusId:b.statusId},{favorite:!b.favorite},function(b){a.statuses[c].favorite=b.favorite})},a.shareStatus=function(b,c){d.update({statusId:b.statusId},{shared:!b.shareByMe},function(b){a.statuses[c].shareByMe=b.shareByMe})},a.announceStatus=function(b){d.update({statusId:b.statusId},{announced:!0},function(){a.$state.reload()})},a.deleteStatus=function(b,c,e){d["delete"]({statusId:b.statusId},null,function(){
a.statuses.splice(c,1)})},a.getShares=function(b,c){"STATUS"==b.type&&null==b.shares&&d.getDetails({statusId:b.statusId},null,function(b){a.statuses[c].shares=b.sharedByLogins})}}]),HomeModule.controller("UserListController",["$scope","UserService","users",function(a,b,c){a.users=c,a.followUser=function(c,d){b.follow({username:c.username},{friend:!c.friend,friendShip:!0},function(b){a.users[d].friend=b.friend,a.$state.reload()})}}]),TatamiApp.factory("AuthenticationService",["$rootScope","$state","UserSession",function(a,b,c){return{authenticate:function(){return c.authenticate().then(function(a){null!==a&&null===a.action&&b.current.data&&!b.current.data["public"]&&(c.clearSession(),b.go("tatami.login.main"))})}}}]),TatamiApp.factory("DailyStatusService",["$resource",function(a){return a("/tatami/rest/stats/day")}]),TatamiApp.factory("GeolocalisationService",function(){return{getGeolocalisation:function(a){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){a(b)})},getGeolocUrl:function(a){var b=a.split(",")[0].trim(),c=a.split(",")[1].trim();return"https://www.openstreetmap.org/?mlon="+c+"&mlat="+b}}}),TatamiApp.factory("GroupService",["$resource",function(a){return a("/tatami/rest/groups/:groupId",null,{getStatuses:{method:"GET",isArray:!0,params:{groupId:"@groupId"},url:"/tatami/rest/groups/:groupId/timeline",transformResponse:function(a,b){a=angular.fromJson(a);for(var c=0;c<a.length;c++)if(a[c].avatarURL=""==a[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a[c].avatar+"/photo.jpg",a[c].geoLocalization){var d=a[c].geoLocalization.split(",")[0].trim(),e=a[c].geoLocalization.split(",")[1].trim();a[c].locationURL="https://www.openstreetmap.org/?mlon="+e+"&mlat="+d}return a}},getMembers:{method:"GET",isArray:!0,params:{groupId:"@groupId"},url:"/tatami/rest/groups/:groupId/members/",transformResponse:function(a,b){a=angular.fromJson(a);for(var c=0;c<a.length;c++)a[c].avatarURL=""==a[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a[c].avatar+"/photo.jpg";return a}},getRecommendations:{method:"GET",isArray:!0,url:"/tatami/rest/groupmemberships/suggestions"},join:{method:"PUT",params:{groupId:"@groupId",username:"@username"},url:"/tatami/rest/groups/:groupId/members/:username"},leave:{method:"DELETE",params:{groupId:"@groupId",username:"@username"},url:"/tatami/rest/groups/:groupId/members/:username"},update:{method:"PUT",params:{groupId:"@groupId"},url:"/tatami/rest/groups/:groupId"}})}]),TatamiApp.factory("HomeService",["$resource",function(a){var b=function(a,b){a=angular.fromJson(a);for(var c=0;c<a.length;c++)if(a[c].avatarURL=""==a[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a[c].avatar+"/photo.jpg",a[c].geoLocalization){var d=a[c].geoLocalization.split(",")[0].trim(),e=a[c].geoLocalization.split(",")[1].trim();a[c].locationURL="https://www.openstreetmap.org/?mlon="+e+"&mlat="+d}return a};return a(null,null,{getMentions:{method:"GET",isArray:!0,url:"/tatami/rest/mentions",transformResponse:b},getFavorites:{method:"GET",isArray:!0,url:"/tatami/rest/favorites",transformResponse:b},getCompanyTimeline:{method:"GET",isArray:!0,url:"/tatami/rest/company",transformResponse:b}})}]),TatamiApp.factory("ProfileService",["$resource",function(a){return a("/tatami/rest/account/profile",null,{get:{method:"GET",transformResponse:function(a,b){return a=angular.fromJson(a),a.avatarURL=""==a.avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a.avatar+"/photo.jpg",a}},update:{method:"PUT",transformRequest:function(a,b){return delete a.avatarURL,angular.toJson(a)}}})}]),TatamiApp.factory("SearchService",["$resource",function(a){var b=function(a,b){a=angular.fromJson(a);for(var c=0;c<a.length;c++)a[c].avatarURL=""==a[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a[c].avatar+"/photo.jpg";return a};return a("/tatami/rest/search/:term",{term:"@term"},{query:{method:"GET",isArray:!0,transformResponse:b},get:{method:"GET",transformResponse:b}})}]),TatamiApp.factory("StatusService",["$resource",function(a){var b=function(a,b){a=angular.fromJson(a);for(var c=0;c<a.length;c++)if(a[c].avatarURL=""==a[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a[c].avatar+"/photo.jpg",a[c].geoLocalization){var d=a[c].geoLocalization.split(",")[0].trim(),e=a[c].geoLocalization.split(",")[1].trim();a[c].locationURL="https://www.openstreetmap.org/?mlon="+e+"&mlat="+d}return a};return a("/tatami/rest/statuses/:statusId",null,{get:{method:"GET",transformResponse:function(a,b){if(a=angular.fromJson(a),a.avatarURL=""==a.avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a.avatar+"/photo.jpg",a.geoLocalization){var c=a.geoLocalization.split(",")[0].trim(),d=a.geoLocalization.split(",")[1].trim();a.locationURL="https://www.openstreetmap.org/?mlon="+d+"&mlat="+c}return a}},getHomeTimeline:{method:"GET",isArray:!0,url:"/tatami/rest/statuses/home_timeline",transformResponse:b},getUserTimeline:{method:"GET",isArray:!0,params:{username:"@username"},url:"/tatami/rest/statuses/:username/timeline",transformResponse:b},getDetails:{method:"GET",params:{statusId:"@statusId"},url:"/tatami/rest/statuses/details/:statusId",transformResponse:function(a,b){a=angular.fromJson(a);for(var c=0;c<a.discussionStatuses.length;c++)if(a.discussionStatuses[c].avatarURL=""==a.discussionStatuses[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a.discussionStatuses[c].avatar+"/photo.jpg",a.discussionStatuses[c].geoLocalization){var d=a.discussionStatuses[c].geoLocalization.split(",")[0].trim(),e=a.discussionStatuses[c].geoLocalization.split(",")[1].trim();a.discussionStatuses[c].locationURL="https://www.openstreetmap.org/?mlon="+e+"&mlat="+d}for(var c=0;c<a.sharedByLogins.length;c++)a.sharedByLogins[c].avatarURL=""==a.sharedByLogins[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a.sharedByLogins[c].avatar+"/photo.jpg";return a}},update:{method:"PATCH",params:{statusId:"@statusId"}},announce:{method:"PATCH",params:{params:"@statusId"}}})}]),TatamiApp.factory("TagService",["$resource",function(a){return a("/tatami/rest/tags",null,{get:{method:"GET",params:{tag:"@tag"},url:"/tatami/rest/tags/:tag"},getTagTimeline:{method:"GET",isArray:!0,params:{tag:"@tag"},url:"/tatami/rest/tags/:tag/tag_timeline",transformResponse:function(a,b){a=angular.fromJson(a);for(var c=0;c<a.length;c++)if(a[c].avatarURL=""==a[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a[c].avatar+"/photo.jpg",a[c].geoLocalization){var d=a[c].geoLocalization.split(",")[0].trim(),e=a[c].geoLocalization.split(",")[1].trim();a[c].locationURL="https://www.openstreetmap.org/?mlon="+e+"&mlat="+d}return a}},follow:{method:"PUT",params:{tag:"@tag"},url:"/tatami/rest/tags/:tag"},getPopular:{method:"GET",isArray:!0,url:"/tatami/rest/tags/popular"}})}]),TatamiApp.factory("TopPostersService",["$resource",function(a){return a("/tatami/rest/stats/day")}]),TatamiApp.factory("UserService",["$resource",function(a){var b=function(a,b){a=angular.fromJson(a);for(var c=0;c<a.length;c++)a[c].avatarURL=""==a[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a[c].avatar+"/photo.jpg";return a};return a("/tatami/rest/users/:username",null,{get:{method:"GET",params:{username:"@username"},transformResponse:function(a,b){return a=angular.fromJson(a),a.avatarURL=""==a.avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a.avatar+"/photo.jpg",a}},query:{method:"GET",isArray:!0,url:"/tatami/rest/users",transformResponse:b},getFollowing:{method:"GET",isArray:!0,params:{username:"@username"},url:"/tatami/rest/users/:username/friends",transformResponse:b},getFollowers:{method:"GET",isArray:!0,params:{username:"@username"},url:"/tatami/rest/users/:username/followers",transformResponse:b},getSuggestions:{method:"GET",isArray:!0,url:"/tatami/rest/users/suggestions",transformResponse:function(a,b){a=angular.fromJson(a);for(var c=0;c<a.length;c++)a[c].avatarURL=""==a[c].avatar?"/assets/img/default_image_profile.png":"/tatami/avatar/"+a[c].avatar+"/photo.jpg",a[c].followingUser=!1;return a}},follow:{method:"PATCH",params:{username:"@username"}},searchUsers:{method:"GET",isArray:!0,url:"/tatami/rest/users/:term",transformResponse:b},deactivate:{method:"PATCH",params:{username:"@username"}}})}]),TatamiApp.factory("UserSession",["$q","$window","ProfileService","localStorageService",function(a,b,c,d){var e,f=!1;return{isAuthenticated:function(){return"true"===d.get("token")},isUserResolved:function(){return angular.isDefined(e)},setLoginState:function(a){d.set("token",a)},clearSession:function(){d.clearAll()},getUser:function(){return e},authenticate:function(b){var d=a.defer();return b&&(e=void 0),this.isUserResolved()&&null!==e.action?(d.resolve(e),d.promise):(c.get(function(a){e=a,f=!0,d.resolve(e)},function(a){e=null,f=!1,d.resolve(e)}),d.promise)}}}]),HomeSidebarModule.controller("HomeSidebarController",["$scope","UserService","TagService","profile","groups","suggestions","tags",function(a,b,c,d,e,f,g){a.profile=d,a.groups=e,a.suggestions=f,a.tags=g,a.followUser=function(c,d){b.follow({username:c.username},{friend:!c.followingUser,friendShip:!0},function(b){a.suggestions[d].followingUser=b.friend})},a.followTag=function(b,d){c.follow({tag:b.name},{name:b.name,followed:!b.followed,trendingUp:b.trendingUp},function(b){a.tags[d].followed=b.followed,a.$state.reload()})}}]);var HomeSidebarModule=angular.module("HomeSidebarModule",[]);ProfileSidebarModule.controller("ProfileSidebarController",["$scope","TagService","user","tags",function(a,b,c,d){a.user=c,a.tags=d,a.followTag=function(c,d){b.follow({tag:c.name},{name:c.name,followed:!c.followed,trendingUp:c.trendingUp},function(b){a.tags[d].followed=b.followed})}}]);var ProfileSidebarModule=angular.module("ProfileSidebarModule",[]);TopMenuModule.controller("TopMenuController",["$scope","$window","$http","$translate","UserSession","SearchService",function(a,b,c,d,e,f){a.current={},a.current.searchString="",a.$on("start-tour",function(){a.tour.restart(!0)}),a.changeLanguage=function(a){d.use(a)},a.openPostModal=function(){a.$state.go(a.$state.current.name+".post")},a.logout=function(){c.get("/tatami/logout").success(function(){e.clearSession(),a.$state.go("tatami.login.main"),a.searchString=""})},a.goToBlog=function(){var a=d.use();switch("fr"!=a&&"en"!=a&&(a=d.proposedLanguage()),a){case"fr":window.open("http://blog.ippon.fr/");break;default:window.open("http://www.ipponusa.com/blog/")}},a.getResults=function(a){return f.get({term:"all",q:a}).$promise.then(function(a){return angular.isDefined(a.groups[0])&&(a.groups[0].firstGroup=!0),angular.isDefined(a.tags[0])&&(a.tags[0].firstTag=!0),angular.isDefined(a.users[0])&&(a.users[0].firstUser=!0),a.groups.concat(a.users.concat(a.tags))})},a.changeInput=function(b){a.searchString=b},a.searchStatuses=function(b){13===b.keyCode&&a.$state.go("tatami.home.search",{searchTerm:a.searchString})},a.goToPage=function(b,c,d){b.groupId?a.$state.go("tatami.home.home.group.statuses",{groupId:b.groupId}):b.login?a.$state.go("tatami.home.profile.statuses",{username:b.username}):b.groupId||a.$state.go("tatami.home.home.tag",{tag:b.name})}}]);var TopMenuModule=angular.module("TopMenuModule",["PostModule"]);PostModule.controller("PostController",["$scope","$modalInstance","$upload","StatusService","GeolocalisationService","groups","curStatus","SearchService",function(a,b,c,d,e,f,g,h){a.determineTitle=function(){return angular.isDefined(g)?"tatami.home.post.replyTo":"tatami.home.post.update"},a.notArchived=function(a){var b=[];for(var c in a)c.archivedGroup||b.push(c);return b},a.current={preview:!1,geoLoc:!1,groups:f,reply:!1,uploadDone:!0,uploadProgress:0,upload:[],contentEmpty:!0,files:[],attachments:[]},a.status={content:"",groupId:"",replyTo:"",attachmentIds:[],geoLocalization:"",statusPrivate:!1},a.charCount=750,a.uploadStatus={isUploading:!1,progress:0},a.$watch("current.files",function(){for(var b=0;b<a.current.files.length;++b){var d=a.current.files[b];a.uploadStatus.isUploading=!0,a.upload=c.upload({url:"/tatami/rest/fileupload",file:d,fileFormDataName:"uploadFile"}).progress(function(b){a.uploadStatus.progress=parseInt(100*b.loaded/b.total)}).success(function(b,c,d,e){a.current.attachments.push(b[0]),a.uploadStatus.isUploading=!1,a.uploadStatus.progress=0,a.status.attachmentIds.push(b[0].attachmentId)}).error(function(b,c,d,e){a.uploadStatus.isUploading=!1,a.uploadStatus.progress=0})}}),a.fileSize=function(a){return a.size/1e3<1e3?parseInt(a.size/1e3)+"K":parseInt(a.size/1e6)+"M"},b.setCurrentStatus=function(b){var c=angular.isDefined(b);a.current.reply=c,a.currentStatus=c?b:{},c?(a.status.content="@"+a.currentStatus.username+" ",a.status.replyTo=b.statusId):a.currentStatus.avatarURL="/assets/img/default_image_profile.png"},b.setCurrentStatus(g),a.closeModal=function(){b.dismiss(),a.reset(),a.$state.go("^")},b.result["finally"](function(){a.$state.go("^")}),a.statusChange=function(b){a.status.content=b},a.fetchUsers=function(b){return h.query({term:"users",q:b},function(b){a.users=b})},a.selectUser=function(a){return"@"+a.username},a.fetchTags=function(b){return b.length>0?h.query({term:"tags",q:b},function(b){a.tags=b}):void 0},a.selectTag=function(a){return"#"+a.name},a.reset=function(){a.current.preview=!1,a.current.geoLoc=!1,a.current.uploadDone=!0,a.current.uploadProgress=0,a.status.content="",a.status.groupId="",a.status.attachmentIds=[],a.status.geoLocalization="",a.status.replyTo="",a.status.statusPrivate=!1},a.newStatus=function(){a.status.content&&d.save(a.status,function(){b.close(),b.result.then(function(){a.$state.transitionTo("tatami.home.home.timeline",{},{reload:!0})}),a.reset()})},a.updateLocation=function(){a.current.geoLoc?e.getGeolocalisation(a.getLocationString):a.status.geoLocalization=""},a.getLocationString=function(b){a.status.geoLocalization=b.coords.latitude+", "+b.coords.longitude,a.initMap()},a.isOneDayOrMore=function(a){return moment().diff(moment(a),"days",!0)>=1},a.initMap=function(){if(a.current.geoLoc){var b=a.status.geoLocalization,c=b.split(",")[0].trim(),d=b.split(",")[1].trim();map=new OpenLayers.Map("simpleMap");var e=new OpenLayers.Projection("EPSG:4326"),f=new OpenLayers.Projection("EPSG:900913"),g=new OpenLayers.LonLat(parseFloat(d),parseFloat(c)).transform(e,f),h=new OpenLayers.Layer.OSM,i=g,j=12;map.addLayer(h);var k=new OpenLayers.Layer.Markers("Markers");map.addLayer(k),k.addMarker(new OpenLayers.Marker(g)),map.setCenter(i,j)}}}]);var PostModule=angular.module("PostModule",["angularFileUpload","ui.router"]);PostModule.config(["$stateProvider",function(a){var b=["$stateParams","$modal",function(a,b){b.open({templateUrl:"/app/shared/topMenu/post/PostView.html",controller:"PostController",keyboard:!0,resolve:{curStatus:["StatusService",function(b){return null!==a.statusId?b.get({statusId:a.statusId}).$promise:void 0}],groups:["GroupService",function(a){return a.query().$promise}]}})}],c=["$stateParams","$modal",function(a,b){b.open({templateUrl:"/app/shared/topMenu/post/PostView.html",controller:"PostController",keyboard:!0,resolve:{curStatus:["StatusService",function(b){return null!==a.statusIdReply?b.get({statusId:a.statusIdReply}).$promise:void 0}],groups:["GroupService",function(a){return a.query().$promise}]}})}];a.state("tatami.home.status.post",{url:"",params:{statusIdReply:null},onEnter:c}).state("tatami.home.search.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.home.timeline.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.home.mentions.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.home.favorites.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.home.company.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.home.tag.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.home.group.statuses.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.home.group.members.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.profile.statuses.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.profile.following.post",{url:"",params:{statusId:null},onEnter:b}).state("tatami.home.profile.followers.post",{url:"",params:{statusId:null},onEnter:b})}]);